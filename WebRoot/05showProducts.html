<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>显示所有的商品：返回的是JSON</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
	<script type="text/javascript" src="util.js"></script>
	<script type="text/javascript">
		window.onload=function(){
			document.getElementById("bt1").onclick=function(){
				var xhr = getXmlHttpRequest();
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4){
						if(xhr.status==200){
							//在div中显示商品的信息
							var products = eval("("+xhr.responseText+")");
							//XML DOM 或 HTML DOM
							//alert(products);
							for(var i=0;i<products.length;i++){
								var p = products[i];
								//alert(p.id);
								document.getElementById("d1").innerHTML=document.getElementById("d1").innerHTML+p.id+"&nbsp;"+p.name+"&nbsp;"+p.price+"<br/>";
							}
						}
					}
				}
				xhr.open("GET","/day21_00_ajax/servlet/ServletDemo5?time="+new Date().getTime());
				xhr.send(null);
			}
		}
	</script>
  </head>
  
  <body>
    <input type="button" id="bt1" value="显示所有商品"/>
    <hr/>
    <div id="d1"></div>
  </body>
</html>
